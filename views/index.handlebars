<!-- Hero Section - Demo Launch -->
<section id="home" class="hero">
    <div class="hero-background">
        <img src="/img/hal-background.webp"
             srcset="/img/hal-background.webp 1920w,
                     /img/hal-background.webp 1280w,
                     /img/hal-background.webp 768w"
             sizes="100vw"
             alt="Harper and Lyre Background"
             fetchpriority="high"
             width="1920"
             height="1080">
    </div>
    <div class="hero-content">
        <div class="demo-badge bounce">
            <span class="badge-text">üéâ NOW AVAILABLE üéâ</span>
        </div>
        <h1 class="hero-title glitch" data-text="DEMO IS LIVE!">DEMO IS LIVE!</h1>
        <p class="hero-subtitle">Jump into Harper and Lyre's nostalgic N64-style adventure!</p>
        <div class="hero-buttons">
            <a href="https://store.steampowered.com/app/3823640/Harper_and_Lyre_Demo/" target="_blank" class="btn btn-primary btn-pulse">
                <span class="btn-icon">üéÆ</span>
                PLAY FREE DEMO
            </a>
            <a href="https://www.kickstarter.com/projects/harperandlyre/harper-and-lyre/" target="_blank" class="btn btn-secondary">
                <span class="btn-icon">üöÄ</span>
                SUPPORT ON KICKSTARTER
            </a>
        </div>
        <div class="hero-features">
            <div class="feature-pill"><span style="color: var(--secondary-color)">Developer</span> Stormside Studio LLC</div>
            <div class="feature-pill"><span style="color: var(--secondary-color)">Genre</span> 3D Platformer</div>
            <div class="feature-pill"><span style="color: var(--secondary-color)">Style</span> N64 Classics</div>
        </div>
    </div>
    <div class="scroll-indicator">
        <span>Scroll to explore</span>
        <div class="scroll-arrow">‚Üì</div>
    </div>
</section>

<!-- Character Grid Section -->
<section class="character-grid">
    <div class="container">
        <h2 class="section-title">All New Dynamic Duo!</h2>
        <div class="grid-three">
            <div class="character-card">
                <div class="character-gif">
                    <img src="/img/Harper-picture-frame.webp" alt="Harper" loading="lazy" width="400" height="400">
                </div>
                <h3>Harper</h3>
                <p>A spirited red panda ready for adventure!</p>
            </div>
            <div class="character-card">
                <div class="character-gif">
                    <img src="/img/Lyre-picture-frame.webp" alt="Lyre" loading="lazy" width="400" height="400">
                </div>
                <h3>Lyre</h3>
                <p>A quick-witted otter ready for adventure!</p>
            </div>
        </div>
    </div>
</section>

<!-- Harper Introduction -->
<section id="about" class="harper-intro">
    <div class="container">
        <div class="intro-content" id="introContent">
            <div class="intro-text" id="introText">
                <h2 class="section-title" id="characterTitle">{{firstProfile.title}}</h2>
                <p class="intro-description" id="characterDescription">
                    {{firstProfile.description}}
                </p>
            </div>
            <div class="intro-gallery" id="introGallery">
                <div class="gallery-main">
                    <video autoplay loop muted playsinline class="gallery-image active" data-index="0">
                        <source src="{{firstProfile.mainImageWebm}}" type="video/webm">
                        <source src="{{firstProfile.mainImageMp4}}" type="video/mp4">
                    </video>
                </div>
                <div class="gallery-thumbs">
                    {{#each characterProfiles}}
                        <img
                            src="{{this.thumbnail}}"
                            alt="{{this.name}}"
                            class="thumb {{#if @first}}active{{/if}}"
                            data-index="{{@index}}"
                            data-profile-id="{{this.id}}"
                            data-character="{{this.character}}"
                            data-title="{{this.title}}"
                            data-description="{{this.description}}"
                            data-main-image-webm="{{this.mainImageWebm}}"
                            data-main-image-mp4="{{this.mainImageMp4}}">
                    {{/each}}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Gallery Section -->
<section id="gallery" class="gallery-section">
    <div class="container">
        <h2 class="section-title">Memories</h2>
        <div class="gallery-slider">
            <div class="gallery-main-image">
                <img src="/img/gallery-bg-1.webp"
                     srcset="/img/gallery-bg-1.webp 1500w,
                             /img/gallery-bg-1.webp 800w,
                             /img/gallery-bg-1.webp 480w"
                     sizes="(max-width: 768px) 100vw, 1400px"
                     alt="Memory 1"
                     class="gallery-slide active"
                     data-index="0"
                     loading="lazy"
                     width="1500"
                     height="800">
                <img src="/img/gallery-bg-2.webp"
                     srcset="/img/gallery-bg-2.webp 1500w,
                             /img/gallery-bg-2.webp 800w,
                             /img/gallery-bg-2.webp 480w"
                     sizes="(max-width: 768px) 100vw, 1400px"
                     alt="Memory 2"
                     class="gallery-slide"
                     data-index="1"
                     loading="lazy"
                     width="1500"
                     height="800">
                <img src="/img/gallery-bg-3.webp"
                     srcset="/img/gallery-bg-3.webp 1500w,
                             /img/gallery-bg-3.webp 800w,
                             /img/gallery-bg-3.webp 480w"
                     sizes="(max-width: 768px) 100vw, 1400px"
                     alt="Memory 3"
                     class="gallery-slide"
                     data-index="2"
                     loading="lazy"
                     width="1500"
                     height="800">
                <img src="/img/gallery-bg-4.webp"
                     srcset="/img/gallery-bg-4.webp 1500w,
                             /img/gallery-bg-4.webp 800w,
                             /img/gallery-bg-4.webp 480w"
                     sizes="(max-width: 768px) 100vw, 1400px"
                     alt="Memory 4"
                     class="gallery-slide"
                     data-index="3"
                     loading="lazy"
                     width="1500"
                     height="800">
                <img src="/img/gallery-bg-5.webp"
                     srcset="/img/gallery-bg-5.webp 1500w,
                             /img/gallery-bg-5.webp 800w,
                             /img/gallery-bg-5.webp 480w"
                     sizes="(max-width: 768px) 100vw, 1400px"
                     alt="Memory 5"
                     class="gallery-slide"
                     data-index="4"
                     loading="lazy"
                     width="1500"
                     height="800">
            </div>
            <div class="gallery-nav">
                <span class="gallery-dot active" data-index="0"></span>
                <span class="gallery-dot" data-index="1"></span>
                <span class="gallery-dot" data-index="2"></span>
                <span class="gallery-dot" data-index="3"></span>
                <span class="gallery-dot" data-index="4"></span>
            </div>
        </div>
    </div>
</section>

<!-- Music Section -->
<section id="music" class="music-section">
    <!-- Twisted Token Background -->
    <div class="twisted-tokens-bg">
        <img src="/img/Twisted_Token_GIF.gif" alt="Twisted Token" class="token-bg token-1">
        <img src="/img/Twisted_Token_GIF.gif" alt="Twisted Token" class="token-bg token-2">
        <img src="/img/Twisted_Token_GIF.gif" alt="Twisted Token" class="token-bg token-3">
    </div>

    <div class="container">
        <h2 class="section-title music-title">üéµ Soundtrack</h2>
        <p class="section-subtitle music-subtitle">Experience the nostalgic melodies of Harper and Lyre</p>

        <div class="music-grid">
            <!-- Track 1 -->
            <div class="music-card">
                <div class="floppy-disk">
                    <img src="/img/FM_Floppy.webp" alt="Floppy Disk">
                </div>
                <h3 class="track-title">Firestone Mountain</h3>
                <div class="music-player" data-track="1">
                    <div id="ytplayer1" class="youtube-player"></div>
                    <div class="player-controls">
                        <button class="play-btn" data-player="ytplayer1">‚ñ∂</button>
                        <button class="pause-btn" data-player="ytplayer1">‚è∏</button>
                        <input type="range" class="volume-slider" data-player="ytplayer1" min="0" max="100" value="50">
                        <span class="volume-icon">üîä</span>
                    </div>
                </div>
            </div>

            <!-- Track 2 -->
            <div class="music-card">
                <div class="floppy-disk">
                    <img src="/img/TDF_Floppy.webp" alt="Floppy Disk">
                </div>
                <h3 class="track-title">Twin Daisy Farm</h3>
                <div class="music-player" data-track="2">
                    <div id="ytplayer2" class="youtube-player"></div>
                    <div class="player-controls">
                        <button class="play-btn" data-player="ytplayer2">‚ñ∂</button>
                        <button class="pause-btn" data-player="ytplayer2">‚è∏</button>
                        <input type="range" class="volume-slider" data-player="ytplayer2" min="0" max="100" value="50">
                        <span class="volume-icon">üîä</span>
                    </div>
                </div>
            </div>

            <!-- Track 3 -->
            <div class="music-card">
                <div class="floppy-disk">
                    <img src="/img/MSC_Floppy.webp" alt="Floppy Disk">
                </div>
                <h3 class="track-title">Mist-side Castle</h3>
                <div class="music-player" data-track="3">
                    <div id="ytplayer3" class="youtube-player"></div>
                    <div class="player-controls">
                        <button class="play-btn" data-player="ytplayer3">‚ñ∂</button>
                        <button class="pause-btn" data-player="ytplayer3">‚è∏</button>
                        <input type="range" class="volume-slider" data-player="ytplayer3" min="0" max="100" value="50">
                        <span class="volume-icon">üîä</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Harper's Journal - DINOHATTAN THEME -->
<section id="journal" class="journal-section dinohattan-theme">
    <!-- Dinosaur Fossils Background -->
    <div class="dino-fossils">
        <div class="fossil fossil-skull"></div>
        <div class="fossil fossil-bone-1"></div>
        <div class="fossil fossil-bone-2"></div>
    </div>

    <!-- Tar Pit Bubbles -->
    <div class="tar-bubbles-container" id="tarBubbles"></div>

    <!-- Dino Footprints -->
    <div class="dino-footprints">
        <div class="footprint footprint-1">ü¶∂</div>
        <div class="footprint footprint-2">ü¶∂</div>
        <div class="footprint footprint-3">ü¶∂</div>
    </div>

    <div class="container">
        <h2 class="section-title dino-title">ü¶¥ Harper's Journal</h2>
        <p class="section-subtitle dino-subtitle">Unearth the secrets of prehistoric worlds</p>

        <div class="journal-book">
            <div class="journal-spine"></div>
            <div class="journal-pages">
                <!-- Left page: World image and description -->
                <div class="journal-page-left">
                    <div id="worldContent" class="world-content">
                        <img src="{{firstWorld.image}}" alt="{{firstWorld.name}}" class="world-content-image">
                        <p class="world-content-text">{{firstWorld.description}}</p>
                    </div>
                </div>

                <!-- Right page: Worlds list -->
                <div class="journal-page-right">
                    <h3 class="journal-list-title">Discovered Worlds</h3>
                    <div id="worldsList" class="journal-list">
                        {{#each worlds}}
                            {{#if discovered}}
                                <div class="journal-list-item world-list-item" data-world-id="{{id}}" data-discovered="true" data-name="{{name}}" data-emoji="{{{emoji}}}" data-description="{{description}}" data-image="{{image}}">
                                    <div class="world-list-item-name">
                                        <span class="world-list-item-emoji">{{{emoji}}}</span>
                                        {{name}}
                                    </div>
                                </div>
                            {{else}}
                                <div class="journal-list-item world-list-item locked" data-world-id="{{id}}" data-discovered="false">
                                    <div class="world-list-item-name">
                                        <span class="world-list-item-emoji">‚ùì</span>
                                        ???
                                    </div>
                                </div>
                            {{/if}}
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Magical Pocus News Section -->
<section id="pocus-news" class="pocus-news-section">
    <!-- Parallax Platform Layers -->
    {{!-- <div class="parallax-layers">
        <div class="parallax-layer parallax-bg" data-speed="0.2"></div>
        <div class="parallax-layer parallax-mid" data-speed="0.5"></div>
        <div class="parallax-layer parallax-fg" data-speed="0.8"></div>
        <img src="/img/harper-idle.gif" alt="Harper walking" class="harper-sprite-transition" id="harperSprite">
    </div> --}}
    <div class="mystical-background">
        <div class="sparkle sparkle-1"></div>
        <div class="sparkle sparkle-2"></div>
        <div class="sparkle sparkle-3"></div>
        <div class="sparkle sparkle-4"></div>
    </div>

    <div class="container">
        <h2 class="section-title mystical-title">Pocus's Magical Chronicles</h2>
        <p class="section-subtitle mystical-subtitle">Ancient wisdom regarding game updates</p>

        <div class="pocus-display">
            <!-- Left: Pocus sitting -->
            <div class="pocus-character">
                <div class="pocus-glow"></div>
                <video autoplay loop muted playsinline class="pocus-gif">
                    <source src="/img/pocusAnim.webm" type="video/webm">
                    <source src="/img/pocusAnim.mp4" type="video/mp4">
                </video>
                <div class="pocus-platform"></div>
            </div>

            <!-- Right: Magical scroll with news -->
            <div class="magical-scroll">
                <div class="scroll-glow"></div>
                <div class="scroll-top"></div>
                <div class="scroll-body">
                    <div id="pocusNewsList" class="scroll-content">
                        <div class="news-loading">
                            <p>Channeling magical energies...</p>
                        </div>
                    </div>
                </div>
                <div class="scroll-bottom"></div>
                <div class="purple-sparkles">
                    <span class="sparkle-particle"></span>
                    <span class="sparkle-particle"></span>
                    <span class="sparkle-particle"></span>
                    <span class="sparkle-particle"></span>
                    <span class="sparkle-particle"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Musical Note Particle Curtain & Darkness Creep Transition -->
    {{!-- <div class="musical-corruption-transition">
        <canvas id="musicalNotesCanvas" class="musical-notes-canvas"></canvas>
        <div class="darkness-creep-container">
            <canvas id="darknessCanvas" class="darkness-canvas"></canvas>
            <div class="corruption-vignette"></div>
        </div>
    </div> --}}
</section>

<!-- Kreakli's Demise -->
<section id="villains" class="villain-section">
    <div class="villain-background">
        <div class="dark-overlay"></div>
    </div>
    <div class="container">
        <div class="villain-content">
            <h2 class="section-title villain-title">Kreakli's Demise</h2>
            <div class="villain-main">
                <div class="villain-image-container">
                    <div class="evil-aura"></div>
                    <video autoplay loop muted playsinline class="villain-image">
                        <source src="/img/kreakliAnim.webm" type="video/webm">
                        <source src="/img/kreakliAnim.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="villain-description">
                    <p class="villain-text">
                        Awakened from the Dark Oak Tree, Kreakli is a malevolent spirit once trapped within the pale moonstone. Now free, he spreads chaos and destruction across the festival grounds, threatening everything Harper holds dear. Only by collecting scattered tokens, solving puzzles, and mastering transformations can Harper stop him.
                    </p>

                </div>
            </div>

            <div class="kreakli-accomplishments-section">
                <h3 class="kreakli-accomplishments-title">Kreakli's Corruption</h3>
                <div class="kreakli-accomplishments-grid">
                    <div class="kreakli-accomplishment-card">
                        <div class="kreakli-accomplishment-image">
                            <img src="/img/paleMoonStone.webp" alt="Pale Moonstone">
                        </div>
                        <h4>The Stolen Pale Moonstone</h4>
                        <p>The Pale Moonstone imprisoned Kreakli for generations. When it shattered during the festival, he broke free and unleashed chaos</p>
                    </div>
                    <div class="kreakli-accomplishment-card">
                        <div class="kreakli-accomplishment-image">
                            <img src="/img/Twisted_Token.webp" alt="Twisted Tokens">
                        </div>
                        <h4>Lost Twisted Tokens</h4>
                        <p>Find <strong>18</strong> Twisted Tokens scattered across the corrupted worlds. Restoring each one seems to weaken Kreakli's hold... but something feels off about these strange artifacts</p>
                    </div>
                    <div class="kreakli-accomplishment-card">
                        <div class="kreakli-accomplishment-image">
                            <img src="/img/purpleFlazoozle.webp" alt="Purple Flazoozle">
                        </div>
                        <h4>Scattered Flazoozles</h4>
                        <p>In his rampage, Kreakli scattered <strong>144</strong> innocent Flazoozles across the corrupted lands. These helpless creatures need Harper's help to find their way home and restore peace to the world</p>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action - Kickstarter -->
<section class="cta-section snowshow-theme">
    <!-- Blizzard Snow Particles -->
    <div class="snow-particles-container" id="snowParticles"></div>

    <!-- Ice Crystals Background -->
    <div class="ice-crystals">
        <div class="ice-crystal crystal-1">‚ùÑ</div>
        <div class="ice-crystal crystal-2">‚ùÑ</div>
        <div class="ice-crystal crystal-3">‚ùÑ</div>
        <div class="ice-crystal crystal-4">‚ùÑ</div>
        <div class="ice-crystal crystal-5">‚ùÑ</div>
    </div>

    <!-- Frozen Icicles -->
    <div class="icicles-top">
        <div class="icicle icicle-1"></div>
        <div class="icicle icicle-2"></div>
        <div class="icicle icicle-3"></div>
        <div class="icicle icicle-4"></div>
        <div class="icicle icicle-5"></div>
    </div>

    <div class="container">
        <div class="cta-content">
            <div class="cta-badge">
                <span>üöÄ LIVE NOW</span>
            </div>
            <h2 class="cta-title">Support Harper and Lyre on Kickstarter!</h2>
            <p class="cta-description">
                Help bring this nostalgic 3D platformer to life! Back our Kickstarter campaign and
                unlock exclusive rewards, including custom NPCs, mini-games, in-game items, and more!
            </p>
            <div class="cta-buttons">
                <a href="https://www.kickstarter.com/projects/harperandlyre/harper-and-lyre/" target="_blank" class="btn btn-kickstarter">
                    <span class="btn-icon">üíö</span>
                    BACK US ON KICKSTARTER
                </a>
            </div>
            <div class="cta-features">
                <div class="cta-feature">
                    <span class="feature-icon">üé®</span>
                    <span>Custom NPCs</span>
                </div>
                <div class="cta-feature">
                    <span class="feature-icon">üéÆ</span>
                    <span>Exclusive Mini-Games</span>
                </div>
                <div class="cta-feature">
                    <span class="feature-icon">üëï</span>
                    <span>Limited Edition Items</span>
                </div>
                <div class="cta-feature">
                    <span class="feature-icon">üéµ</span>
                    <span>Early Access</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Loading Screen -->
<div id="loading-screen">
    <div class="loading-content">
        <img src="/img/harperandlyre-logo.webp" alt="Harper and Lyre" class="loading-logo">
        <div class="loading-spinner"></div>
        <p class="loading-title">Loading Adventure...</p>
        <p class="loading-tip" id="loadingTip">Collect 144 Flazoozles scattered across the worlds!</p>
    </div>
</div>

<style>
    #loading-screen .loading-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
    }

    #loading-screen .loading-logo {
        width: 200px;
        height: auto;
        filter: drop-shadow(0 4px 12px rgba(255, 215, 63, 0.3));
        animation: logoFloat 3s ease-in-out infinite;
    }

    @keyframes logoFloat {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }

    #loading-screen .loading-title {
        font-family: 'Riffic', 'Bangers', Impact, cursive;
        font-size: 2rem;
        color: #ffffff;
        text-shadow: 2px 2px 0 #9B59B6;
        margin: 0;
    }

    #loading-screen .loading-tip {
        font-size: 1.1rem;
        color: #FFF8F0;
        text-align: center;
        max-width: 500px;
        padding: 0 1rem;
        margin: 0;
        opacity: 0.9;
        font-style: italic;
    }

    @media (max-width: 768px) {
        #loading-screen .loading-logo {
            width: 150px;
        }

        #loading-screen .loading-title {
            font-size: 1.5rem;
        }

        #loading-screen .loading-tip {
            font-size: 0.95rem;
        }
    }
</style>

<script>
    // Loading tips from server
    const loadingTips = {{{loadingTipsJSON}}};

    const tipElement = document.getElementById('loadingTip');
    let lastTipIndex = 0;

    // Function to get a random tip that's different from the last one
    function getRandomTip() {
        let randomIndex;
        do {
            randomIndex = Math.floor(Math.random() * loadingTips.length);
        } while (randomIndex === lastTipIndex && loadingTips.length > 1);
        lastTipIndex = randomIndex;
        return loadingTips[randomIndex];
    }

    // Set initial random tip
    tipElement.textContent = getRandomTip();

    // Rotate tips every 2.5 seconds with random selection
    const tipInterval = setInterval(() => {
        if (tipElement) {
            tipElement.style.opacity = '0';
            setTimeout(() => {
                tipElement.textContent = getRandomTip();
                tipElement.style.opacity = '0.9';
            }, 300);
        }
    }, 2500);

    tipElement.style.transition = 'opacity 0.3s ease';

    // Remove loading screen when page is fully loaded
    window.addEventListener('load', () => {
        clearInterval(tipInterval);
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
            loadingScreen.style.opacity = '0';
            loadingScreen.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
        }
    });
</script>
